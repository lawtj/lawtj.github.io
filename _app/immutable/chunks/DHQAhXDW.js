var v=Object.defineProperty;var p=e=>{throw TypeError(e)};var j=(e,s,t)=>s in e?v(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var n=(e,s,t)=>j(e,typeof s!="symbol"?s+"":s,t),k=(e,s,t)=>s.has(e)||p("Cannot "+t);var f=(e,s,t)=>(k(e,s,"read from private field"),t?t.call(e):s.get(e)),a=(e,s,t)=>s.has(e)?p("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,t);import{d as E,g as y,e as x,i as T,b,m as I}from"./BDFh8iLU.js";function M(...e){return e.filter(Boolean).join(" ")}const H=typeof document<"u";let w=0;var l,d,g;class P{constructor(){a(this,l,x(T([])));a(this,d,x(T([])));a(this,g,s=>{const t=this.toasts.findIndex(i=>i.id===s);return t===-1?null:t});n(this,"addToast",s=>{H&&this.toasts.unshift(s)});n(this,"updateToast",({id:s,data:t,type:i,message:h})=>{const u=this.toasts.findIndex(c=>c.id===s),r=this.toasts[u];this.toasts[u]={...r,...t,id:s,title:h,type:i,updated:!0}});n(this,"create",s=>{var c;const{message:t,...i}=s,h=typeof(s==null?void 0:s.id)=="number"||s.id&&((c=s.id)==null?void 0:c.length)>0?s.id:w++,u=s.dismissable===void 0?!0:s.dismissable,r=s.type===void 0?"default":s.type;return I(()=>{this.toasts.find(S=>S.id===h)?this.updateToast({id:h,data:s,type:r,message:t,dismissable:u}):this.addToast({...i,id:h,title:t,dismissable:u,type:r})}),h});n(this,"dismiss",s=>(I(()=>{if(s===void 0){this.toasts=this.toasts.map(i=>({...i,dismiss:!0}));return}const t=this.toasts.findIndex(i=>i.id===s);this.toasts[t]&&(this.toasts[t]={...this.toasts[t],dismiss:!0})}),s));n(this,"remove",s=>{if(s===void 0){this.toasts=[];return}const t=f(this,g).call(this,s);if(t!==null)return this.toasts.splice(t,1),s});n(this,"message",(s,t)=>this.create({...t,type:"default",message:s}));n(this,"error",(s,t)=>this.create({...t,type:"error",message:s}));n(this,"success",(s,t)=>this.create({...t,type:"success",message:s}));n(this,"info",(s,t)=>this.create({...t,type:"info",message:s}));n(this,"warning",(s,t)=>this.create({...t,type:"warning",message:s}));n(this,"loading",(s,t)=>this.create({...t,type:"loading",message:s}));n(this,"promise",(s,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:s,type:"loading",message:typeof t.loading=="string"?t.loading:t.loading()}));const h=s instanceof Promise?s:s();let u=i!==void 0;return h.then(r=>{if(typeof r=="object"&&r&&"ok"in r&&typeof r.ok=="boolean"&&!r.ok){u=!1;const c=B(r);this.create({id:i,type:"error",message:c})}else if(t.success!==void 0){u=!1;const c=typeof t.success=="function"?t.success(r):t.success;this.create({id:i,type:"success",message:c})}}).catch(r=>{if(t.error!==void 0){u=!1;const c=typeof t.error=="function"?t.error(r):t.error;this.create({id:i,type:"error",message:c})}}).finally(()=>{var r;u&&(this.dismiss(i),i=void 0),(r=t.finally)==null||r.call(t)}),i});n(this,"custom",(s,t)=>{const i=(t==null?void 0:t.id)||w++;return this.create({component:s,id:i,...t}),i});n(this,"removeHeight",s=>{this.heights=this.heights.filter(t=>t.toastId!==s)});n(this,"setHeight",s=>{const t=f(this,g).call(this,s.toastId);if(t===null){this.heights.push(s);return}this.heights[t]=s});n(this,"reset",()=>{this.toasts=[],this.heights=[]})}get toasts(){return y(f(this,l))}set toasts(s){b(f(this,l),s,!0)}get heights(){return y(f(this,d))}set heights(s){b(f(this,d),s,!0)}}l=new WeakMap,d=new WeakMap,g=new WeakMap;function B(e){return e&&typeof e=="object"&&"status"in e?`HTTP error! Status: ${e.status}`:`Error! ${e}`}const o=new P;function $(e,s){return o.create({message:e,...s})}var m;class O{constructor(){a(this,m,E(()=>o.toasts.filter(s=>!s.dismiss)))}get toasts(){return y(f(this,m))}}m=new WeakMap;const A=$,U=Object.assign(A,{success:o.success,info:o.info,warning:o.warning,error:o.error,custom:o.custom,message:o.message,promise:o.promise,dismiss:o.dismiss,loading:o.loading,getActiveToasts:()=>o.toasts.filter(e=>!e.dismiss)});export{O as S,o as a,M as c,U as t};
